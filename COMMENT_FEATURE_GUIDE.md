# 专注记录评论功能使用指南

## 功能概述

为专注记录添加了评论功能，允许用户为每条专注记录添加多条评论，用于记录想法、反思或补充信息。

## 功能特点

### 1. 数据结构
- 每条专注记录可以包含多条评论
- 每条评论包含：
  - 唯一ID
  - 评论内容
  - 创建时间戳

### 2. 用户界面设计
- **极简风格**：与应用整体UI风格保持一致
- **按需显示**：添加评论框只在点击"+"按钮时出现
- **评论显示**：使用左边框线条样式，简洁清晰
- **评论管理**：编辑按钮位于右上角，删除按钮位于右下角
- **评论计数**：在时间轴中显示小巧的评论数量图标

### 3. 交互设计
- **添加评论**：点击"+"按钮显示输入框，有明确的确认和取消按钮
- **编辑评论**：鼠标悬停显示编辑和删除按钮
- **时间显示**：显示绝对时间（年月日时分）

## 使用方法

### 添加评论
1. 打开任意专注记录的编辑页面
2. 滚动到页面底部，找到"COMMENTS"区域
3. 点击右侧的"+"按钮
4. 在弹出的文本框中输入评论内容
5. 点击"Add Comment"按钮确认，或点击"Cancel"取消

### 查看和管理评论
1. 在时间轴中，有评论的记录会显示小巧的评论图标和数量
2. 点击记录进入编辑页面
3. 在底部查看所有评论，以简洁的左边框样式显示
4. 每条评论的编辑按钮位于右上角，删除按钮位于右下角
5. 点击编辑按钮可以修改评论内容
6. 点击删除按钮可以删除评论

### 编辑评论
1. 找到要编辑的评论
2. 点击评论右上角的编辑图标（铅笔图标）
3. 在弹出的编辑框中修改内容
4. 点击"Save"保存或"Cancel"取消

## UI设计原则

### 与整体风格保持一致
- 使用相同的字体大小和颜色系统
- 标题采用`text-xs font-bold text-stone-400 uppercase tracking-widest`样式
- 输入框与Note区域完全一致的样式
- 评论显示使用简洁的左边框线条，避免多余的背景色

### 按需显示设计
- 添加评论框默认隐藏，点击"+"按钮才显示
- 编辑按钮位于评论右上角，删除按钮位于右下角
- 按钮布局清晰，便于移动端操作
- 减少界面复杂度，保持整洁

### 明确的操作反馈
- 所有操作都有明确的确认和取消按钮
- 按钮状态清晰（禁用状态、悬停效果等）
- 操作流程简单直观

## 技术实现

### 新增组件
- `CommentSection.tsx`：评论区域组件，支持完整的CRUD操作

### 修改的文件
- `types.ts`：添加Comment接口和Log接口的comments字段
- `AddLogModal.tsx`：集成评论功能到记录编辑界面
- `DetailTimelineCard.tsx`：在时间轴中显示评论数量（小图标）

### 功能特性
- **添加评论**：点击"+"按钮显示输入框
- **编辑评论**：内联编辑，保存或取消
- **删除评论**：直接删除，无需确认（可根据需要添加确认对话框）
- **时间显示**：绝对时间格式（2024年1月21日 14:30）

### 数据持久化
- 评论数据作为Log对象的一部分存储在localStorage中
- 与现有的数据同步机制兼容
- 支持评论的增删改操作

## 注意事项

1. **数据兼容性**：现有的专注记录不会受到影响，comments字段为可选
2. **UI一致性**：严格遵循应用的极简设计风格
3. **交互清晰**：所有操作都有明确的入口和反馈
4. **移动端适配**：编辑和删除按钮始终可见，无需hover操作
5. **性能考虑**：按需显示，减少不必要的DOM元素

## 未来扩展

可以考虑的功能扩展：
- 删除评论时的确认对话框
- 评论回复功能
- 评论搜索
- 评论导出
- 评论标签或分类
- 评论排序（按时间正序/倒序）