# 时光小友调试工具使用指南

## 🎯 功能说明

时光小友调试工具允许你在开发过程中快速测试不同类型的时光小友和不同的形态等级，无需实际记录专注时长。

## 🚀 如何开启

### 方法 1：控制台命令
在浏览器控制台（F12）中输入：

```javascript
enableTimePalDebug()
```

### 方法 2：直接调用
在代码中或控制台中：

```javascript
window.enableTimePalDebug()
```

## 📱 调试器界面

调试器会在脉络页面的右上角显示一个悬浮窗口，包含以下功能：

### 1. 小友类型切换
- **左右箭头按钮**：快速切换不同的时光小友类型
- **显示内容**：当前小友的 emoji 和名称
- **支持类型**：
  - 原有：猫咪、小狗、兔子、猴子、小王子、Q版
  - 新增：佛教、猫咪2、小狗2、幽灵、女孩2-4、老鼠、熊猫、鸽子、小王子2、兔子2、忍者、道士

### 2. 形态等级选择
- **5个等级按钮**：对应不同的专注时长范围
  - 等级 1：< 2小时（刚刚苏醒）
  - 等级 2：2-4小时（精神饱满）
  - 等级 3：4-6小时（活力四射）
  - 等级 4：6-8小时（元气满满）
  - 等级 5：≥ 8小时（超级无敌）

### 3. 专注时长滑块
- **范围**：0-12小时
- **步进**：0.5小时
- **功能**：
  - 拖动滑块可以精确设置模拟的专注时长
  - 会自动计算并更新对应的形态等级
  - 反之，点击等级按钮也会更新滑块位置

### 4. 应用按钮
- 点击"应用调试状态"按钮后，时光小友卡片会立即更新
- 卡片右上角会显示"调试"标识
- 边框会变成琥珀色，表示处于调试模式

## 🔧 使用流程

1. **开启调试器**
   ```javascript
   enableTimePalDebug()
   ```

2. **选择小友类型**
   - 使用左右箭头切换到想要测试的类型

3. **设置形态等级**
   - 点击等级按钮（1-5）
   - 或拖动专注时长滑块

4. **应用状态**
   - 点击"应用调试状态"按钮
   - 观察时光小友卡片的变化

5. **测试动画**
   - 不同等级有不同的动画效果
   - 等级越高，动画越活跃

6. **关闭调试器**
   - 点击右上角的 X 按钮
   - 或在控制台输入：
     ```javascript
     disableTimePalDebug()
     ```

## 💡 调试技巧

### 快速测试所有类型
```javascript
// 开启调试器
enableTimePalDebug()

// 在调试器中快速点击左右箭头
// 观察每个类型的 5 个等级
```

### 测试边界情况
```javascript
// 测试最低等级（0小时）
// 在滑块中设置为 0

// 测试最高等级（12小时）
// 在滑块中设置为 12
```

### 测试动画效果
```javascript
// 依次测试等级 1-5
// 观察动画的变化：
// - 等级 1：轻微摇晃
// - 等级 2：摇晃 + 缩放
// - 等级 3：更大摇晃 + 明显缩放
// - 等级 4：弹跳 + 摇晃
// - 等级 5：快速弹跳 + Q弹效果
```

## 🎨 调试模式特征

当处于调试模式时，时光小友卡片会有以下特征：

1. **视觉标识**
   - 右上角显示"调试"标签（琥珀色背景）
   - 边框变为琥珀色
   - 阴影带有琥珀色调

2. **数据来源**
   - 显示的专注时长来自调试器设置
   - 形态等级来自调试器设置
   - 不受实际记录的影响

3. **实时更新**
   - 每次点击"应用调试状态"都会立即更新
   - 可以快速切换类型和等级

## 🔍 验证图片资源

使用调试器可以快速验证所有时光小友的图片资源是否正确：

1. 开启调试器
2. 遍历所有类型
3. 对每个类型测试 5 个等级
4. 检查图片是否正确加载
5. 检查 PNG → WebP 降级是否正常工作

## ⚠️ 注意事项

1. **仅在开发环境使用**
   - 调试器仅用于开发和测试
   - 不要在生产环境中开启

2. **退出调试模式**
   - 关闭调试器会退出调试模式
   - 时光小友会恢复显示真实数据

3. **不影响实际数据**
   - 调试模式不会修改任何实际的专注记录
   - 只是临时显示模拟数据

4. **刷新页面**
   - 刷新页面后调试器会关闭
   - 需要重新开启

## 🐛 故障排除

### 调试器不显示
```javascript
// 确保在脉络页面
// 重新执行开启命令
enableTimePalDebug()
```

### 图片不显示
```javascript
// 检查图片文件是否存在
// 检查浏览器控制台的错误信息
// 验证 PNG/WebP 文件路径
```

### 动画不流畅
```javascript
// 检查浏览器性能
// 关闭其他占用资源的标签页
// 尝试降低浏览器缩放比例
```

## 📝 开发者备注

### 相关文件
- `src/components/TimePalDebugger.tsx` - 调试器组件
- `src/components/TimePalCard.tsx` - 时光小友卡片（支持调试模式）
- `src/views/TimelineView.tsx` - 脉络页面（集成调试器）
- `src/constants/timePalConfig.ts` - 时光小友配置

### 事件系统
- `timepal-debug-mode` - 调试模式切换事件
- `timepal-type-changed` - 类型变化事件

### 控制台 API
```javascript
// 全局可用的函数
window.enableTimePalDebug()   // 开启调试器
window.disableTimePalDebug()  // 关闭调试器
```

## 🎉 快速开始

最简单的使用方式：

1. 打开应用，进入脉络页面
2. 按 F12 打开控制台
3. 输入 `enableTimePalDebug()` 并回车
4. 在右上角的调试器中选择类型和等级
5. 点击"应用调试状态"
6. 观察时光小友的变化！

Happy Debugging! 🚀
