# Emoji 统计视图功能

## 概述
在 StatsView 中新增了 Emoji 统计视图，用于展示不同时间段的情绪 emoji/sticker 统计数据。

## 功能特性

### 1. 月统计视图
月统计视图以列表形式呈现当月每一天的情绪记录，包含：
- **日期**：显示日期数字和月份
- **Emoji**：当天的情绪 emoji 或 sticker
- **一句话总结**：当天的手动叙事总结

特点：
- 只显示有数据的日期（有 emoji 或总结的日期）
- 卡片式设计，悬停有阴影效果
- 使用手写字体增强视觉效果
- 响应式布局，适配移动端

### 2. 年统计视图
年统计视图采用卡片式设计，展示全年的情绪月历：
- 每张卡片代表一个月份
- 以日历形式展示该月的情绪 emoji
- 只显示有数据的月份（至少有一天有 emoji 记录）

特点：
- 网格布局，移动端单列，平板及以上双列
- 迷你日历设计，清晰展示每天的情绪
- 没有 emoji 的日期显示淡色数字
- 有 emoji 的日期完整显示 emoji/sticker

## 技术实现

### 组件结构
```
EmojiStatsView (主组件)
├── MonthEmojiView (月视图)
└── YearEmojiView (年视图)
    └── MonthCard (月份卡片)
```

### 数据来源
- 使用 `DailyReview` 数据
- 读取 `moodEmoji` 字段（支持 emoji 和 image: 格式的 sticker）
- 读取 `summary` 字段（一句话总结）

### 集成方式
1. 在 StatsView 中添加新的视图类型 `'emoji'`
2. 添加 `emojiRange` 状态（'month' | 'year'）
3. 在控制栏添加时间范围切换器（月/年）
4. 在视图切换器添加 Emoji 按钮（使用 Smile 图标）

## 使用方法

### 访问 Emoji 统计视图
1. 进入统计页面（StatsView）
2. 点击右上角的笑脸图标（😊）切换到 Emoji 视图
3. 使用左侧的"月/年"按钮切换时间范围
4. 使用中间的左右箭头导航不同时间段

### 数据要求
- 需要在每日回顾中设置情绪 emoji
- 月视图还会显示一句话总结（如果有）
- 年视图只显示有情绪记录的月份

## 设计考虑

### 视觉设计
- 使用手写字体（font-handwriting）增强情感表达
- 白色卡片配合柔和阴影
- 响应式网格布局
- 与现有统计视图保持一致的设计语言

### 用户体验
- 空状态提示：无数据时显示友好提示
- 悬停效果：卡片悬停时阴影加深
- 触摸友好：适配移动端手势操作
- 性能优化：使用 useMemo 缓存计算结果

## 未来改进方向
1. 添加情绪统计分析（如最常见的情绪）
2. 支持点击日期查看详细回顾
3. 添加情绪趋势图表
4. 支持导出情绪日历图片
5. 添加情绪筛选功能

## 相关文件
- `src/components/stats/EmojiStatsView.tsx` - 主组件
- `src/views/StatsView.tsx` - 集成代码
- `src/types.ts` - DailyReview 类型定义
