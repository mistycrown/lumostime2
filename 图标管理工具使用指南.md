# 🎨 图标管理工具使用指南

## 📋 目录
1. [快速开始](#快速开始)
2. [功能介绍](#功能介绍)
3. [使用场景](#使用场景)
4. [详细步骤](#详细步骤)
5. [常见问题](#常见问题)

---

## 🚀 快速开始

### 方法一：双击启动（推荐）
直接双击 `start_icon_manager.bat` 文件

### 方法二：命令行启动
```bash
python icon_manager.py
```

启动后会自动在浏览器打开管理界面：`http://localhost:8888`

---

## 💡 功能介绍

### 核心功能
- ✅ **可视化查看**：以网格形式展示所有 96 个图标
- ✅ **主题切换**：支持切换不同的图标主题（cat, color, forest 等）
- ✅ **图标交换**：点击两个图标即可交换它们的文件名
- ✅ **实时预览**：交换后自动刷新，立即看到效果
- ✅ **分组显示**：按功能分组（核心功能、日常生活、学习工作等）
- ✅ **悬浮按钮**：交换模式按钮固定在右下角，滚动页面也能看到
- ✅ **回到顶部**：左下角的快捷按钮，方便快速返回顶部

### 界面说明
```
┌─────────────────────────────────────────┐
│  🔄 UI Icon Manager                     │
│  当前主题: cat                           │
│  [cat] [color] [forest] ...             │  ← 主题切换按钮
│  ┌───┬───┬───┬───┬───┬───┬───┬───┐     │
│  │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │ 8 │     │  ← 图标网格
│  └───┴───┴───┴───┴───┴───┴───┴───┘     │
│                                          │
│  [↑]                    [开启交换模式]   │  ← 悬浮按钮
│  左下角                  右下角           │
└─────────────────────────────────────────┘
```

### 新特性 ✨
- **智能刷新**：交换后自动刷新图片，无需手动刷新页面
- **防缓存**：使用时间戳参数确保显示最新的图片
- **悬浮控制**：交换按钮固定在右下角，随时可用
- **状态提示**：实时显示当前操作状态（选择中、交换中、完成）
- **快速导航**：滚动超过 300px 后显示回到顶部按钮

---

## 🎯 使用场景

### 场景 1：发现图标顺序错误
**问题**：78号图标应该是"锁定"，但显示的是"星标"的图片

**解决**：
1. 开启交换模式
2. 点击 #78
3. 点击 #79
4. 系统自动交换，问题解决！

### 场景 2：批量调整某个主题
**问题**：cat 主题的多个图标位置不对

**解决**：
1. 选择 cat 主题
2. 开启交换模式
3. 逐个交换错误的图标
4. 完成后切换到其他主题验证

### 场景 3：核对所有主题
**问题**：需要确保所有 11 个主题的图标都正确

**解决**：
1. 使用 `icon-checker.html` 查看所有主题
2. 发现问题后，用 `icon_manager.py` 修复
3. 刷新 checker 验证结果

---

## 📝 详细步骤

### 步骤 1：启动工具
```bash
# Windows
双击 start_icon_manager.bat

# 或命令行
python icon_manager.py
```

### 步骤 2：选择主题
- 页面顶部显示所有可用主题
- 点击主题按钮切换（如 cat, color, forest）
- 当前主题会高亮显示

### 步骤 3：开启交换模式
- 点击右下角的"开启交换模式"按钮（绿色悬浮按钮）
- 按钮变绿并开始闪烁表示已开启
- 上方会显示提示：请选择第一个要交换的图标
- **注意**：按钮固定在右下角，滚动页面也能看到

### 步骤 4：选择第一个图标
- 点击任意图标
- 图标会显示绿色边框
- 悬浮提示更新：已选择 #XX，请选择第二个要交换的图标

### 步骤 5：选择第二个图标
- 点击另一个图标
- 系统自动执行交换
- 显示"正在交换..."提示
- 交换完成后自动刷新图片
- 右上角显示成功提示
- 可以继续选择下一组图标

### 步骤 6：继续交换或关闭
- 可以继续选择其他图标交换
- 或点击"关闭交换模式"退出
- 使用左下角的 ↑ 按钮快速回到顶部

---

## ❓ 常见问题

### Q1: 交换后看不到变化？
**A**: 现在已经自动刷新了！如果还是看不到，可能是：
- 等待 0.3 秒让文件系统完成操作
- 检查浏览器控制台是否有错误
- 尝试切换到其他主题再切换回来

### Q2: 悬浮按钮挡住了图标？
**A**: 悬浮按钮在右下角，不会挡住图标网格。如果需要，可以：
- 关闭交换模式让按钮变小
- 使用左下角的 ↑ 按钮回到顶部

### Q3: 提示"文件不存在"？
**A**: 检查 `public/uiicon/{theme}/` 目录下是否有对应的 .webp 文件

### Q4: 端口 8888 被占用？
**A**: 修改 `icon_manager.py` 中的 `PORT = 8888` 为其他端口

### Q5: 交换错了怎么办？
**A**: 再次交换回来即可，或者从备份恢复

### Q6: 可以同时交换多个图标吗？
**A**: 目前只支持两两交换，但交换完成后可以立即选择下一组

### Q7: 交换会影响其他主题吗？
**A**: 不会，每个主题的图标文件是独立的

### Q8: 如何备份图标？
**A**: 复制整个 `public/uiicon/` 目录到其他位置

### Q9: 为什么要添加时间戳？
**A**: 防止浏览器缓存旧图片，确保显示最新交换的结果

---

## 🔧 技术细节

### 文件结构
```
public/uiicon/
├── cat/
│   ├── 01.webp
│   ├── 02.webp
│   └── ...
├── color/
│   ├── 01.webp
│   └── ...
└── ...
```

### 交换原理
```python
# 三步交换法
1. 01.webp → temp_01.webp
2. 02.webp → 01.webp
3. temp_01.webp → 02.webp
```

### API 接口
- `GET /` - 主页面
- `GET /api/themes` - 获取主题列表
- `GET /api/icons?theme=cat` - 获取图标数据
- `POST /api/swap` - 交换图标文件

---

## 💾 备份建议

**强烈建议在使用前备份！**

```bash
# 备份命令
xcopy public\uiicon public\uiicon_backup\ /E /I /H /Y
```

或手动复制 `public/uiicon/` 文件夹

---

## 🎉 使用技巧

1. **先用 checker 检查**：用 `icon-checker.html` 找出所有错误
2. **记录错误列表**：记下需要交换的图标编号
3. **批量修复**：在 manager 中逐个修复
4. **再次验证**：用 checker 确认所有主题都正确

---

## 📞 需要帮助？

如果遇到问题：
1. 检查 Python 版本（需要 3.6+）
2. 确认文件路径正确
3. 查看终端错误信息
4. 尝试重启服务器

---

**祝使用愉快！** 🎨✨
